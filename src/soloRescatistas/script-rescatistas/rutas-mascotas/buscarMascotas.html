<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/src/styles/main.css">
    <link rel="shortcut icon" href="./src/img/icon.png">
    <title>RIAB</title>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg fixed-top" data-bs-theme="dark">
            <div class="container-fluid"> 
              <a class="navbar-brand">RIAB</a>
              <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
          
                  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body text-center">
                  <ul class="navbar-nav justify-content-center flex-grow-1 pe-3">
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2" aria-current="page" href="/src/soloRescatistas/inicio-res.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2" href="/src/soloRescatistas/mascotas.html">Mascotas</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2" href="/src/soloRescatistas/centros.html">Centros</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2" href="/src/soloRescatistas/adopcion.html">Crear Adopción</a>
                    </li>
                    <li class="nav-item"></li>
                      <a class="nav-link mx-lg-2" href="/src/soloRescatistas/añadirMascotas.html">CRUD Mascotas</a>
                    </li>
                    <li class="nav-item"></li>
                      <a class="nav-link mx-lg-2" href="/src/soloRescatistas/cerrarsesion.html">Cerrar Sesión</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
    </header>

    <section class="formularioBusc">
        <div class="wrapper">
          <form id="mascotasForm">
            <h1>Buscar Mascota</h1>
            <h2>Debe de ingresar el id de la mascota</h2>
            <div class="input-box">
                <input id="id-input" type="text" placeholder="Ingrese el id (solo números)" pattern="\d+" required><br>
            </div>
    
            <button id="btnBuscar" type="button">Buscar</button>
            <div id="mensajeActualizacion"></div>
            <ul id="mascotaInfo"></ul>
      </section>
    
    <script>
        const idInput = document.getElementById('id-input');
        const mensajeActualizacion = document.getElementById('mensajeActualizacion');
        const mascotaInfo = document.getElementById('mascotaInfo');

        async function buscarMascota(id) {
            try {
                const response = await fetch(`http://localhost:3000/mascotas/${id}`);
                const data = await response.json();
                if (response.ok && data) {
                    mostrarMascota(data);
                    mensajeActualizacion.textContent = 'Mascota encontrada';
                } else {
                    mensajeActualizacion.textContent = 'Mascota no encontrada.';
                    mascotaInfo.innerHTML = '';
                }
            } catch (error) {
                console.error('Error al buscar la mascota:', error);
                mensajeActualizacion.textContent = 'Error al buscar la mascota. Inténtelo de nuevo más tarde.';
                mascotaInfo.innerHTML = '';
            }
        }

        function mostrarMascota(mascota) {
            const id = mascota.id || 'No especificado';
            const nombreApodo = mascota.nombreApodo || 'No especificado';
            const especie = mascota.especie || 'No especificado';
            const raza = mascota.raza || 'No especificado';
            const color = mascota.color || 'No especificado';
            const anioNacimiento = mascota.anioNacimiento || 'No especificado';

            mascotaInfo.innerHTML = `
                <li><strong>ID:</strong> ${id}</li>
                <li><strong>Nombre/Apodo:</strong> ${nombreApodo}</li>
                <li><strong>Especie:</strong> ${especie}</li>
                <li><strong>Raza:</strong> ${raza}</li>
                <li><strong>Color:</strong> ${color}</li>
                <li><strong>Año de Nacimiento:</strong> ${anioNacimiento}</li>
            `;
        }

        document.getElementById('btnBuscar').addEventListener('click', () => {
            const id = idInput.value;
            if (id) {
                buscarMascota(id);
            } else {
                mensajeActualizacion.textContent = 'Por favor, ingrese un ID válido.';
                mascotaInfo.innerHTML = '';
            }
        });
    </script>

    <hr class="linea-divisor">

    <footer>

    <div class="paginas_footer">
        <a href="/src/soloRescatistas/inicio-res.html">Inicio</a> &nbsp; &nbsp; 
        <a href="/src/soloRescatistas/mascotas.html">Mascotas</a> &nbsp;  &nbsp; 
        <a href="/src/soloRescatistas/centros.html">Centros</a> &nbsp;  &nbsp; 
        <a href="/src/soloRescatistas/adopcion.html">Crear Adopción</a> &nbsp;  
        <a href="/src/soloRescatistas/añadirMascotas.html">Añadir Mascotas</a>  &nbsp; 
        <a href="/src/soloRescatistas/cerrarsesion.html">Cerrar Sesión</a> 
    </div> <br>

    2024 &nbsp; &nbsp; | &nbsp; &nbsp; Todos los derechos reservados

    </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="./botones/scripts-botones/buscarMascotas.js"></script>
</body>
</html>
